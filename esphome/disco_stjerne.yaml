substitutions:
  devicename: disco_stjerne
  upper_devicename: Disco Stjerne

esphome:
  name: $devicename
  platform: ESP8266
  board: d1_mini

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_pass

# Enable logging
logger:

# Enable Home Assistant API
api:
  password: !secret api_pass
  services:
    - service: control_stepper
      variables:
        target: int
      then:
        - stepper.set_target:
            id: my_stepper
            target: !lambda 'return target;'

ota:
  password: !secret ota_pass

web_server:
  port: 80

stepper:
  - platform: uln2003
    id: my_stepper
    pin_a: D2
    pin_b: D5
    pin_c: D6
    pin_d: D7
    max_speed: 500 steps/s


# output:
#   - platform: esp8266_pwm
#     pin: D5
#     id: motor_enable
#     min_power: 0.90

# switch:
#   - platform: gpio
#     pin: D6
#     id: motor_fwd
#     name: "Disco Stjerne Frem"
#     restore_mode: ALWAYS_OFF
#     interlock: [motor_bck]

#   - platform: gpio
#     pin: D7
#     id: motor_bck
#     name: "Disco Stjerne Tilbage"
#     restore_mode: ALWAYS_OFF
#     interlock: [motor_fwd]

# light:
  # - platform: monochromatic
  #   output: motor_enable
  #   restore_mode: ALWAYS_ON
  #   name: "Disco Stjerne Hastighed"
  #   effects:
  #     - strobe:
  #     - flicker:
  #         alpha: 30%
  #         intensity: 90%

  # - platform: fastled_clockless
  #   chipset: PL9823
  #   pin: D2
  #   num_leds: 6
  #   rgb_order: RGB
  #   id: $devicename
  #   name: $upper_devicename
  #   default_transition_length: 500ms
  #   effects:
  #     - random:
  #     - strobe:
  #     - strobe:
  #         name: "Fast Strobe"
  #         colors:
  #           - state: True
  #             brightness: 100%
  #             red:  100%
  #             green: 100%
  #             blue: 100%
  #             duration: 30ms
  #           - state: False
  #             duration: 50ms
  #     - flicker:
  #     - flicker:
  #         name: Strong Flicker
  #         alpha: 50%
  #         intensity: 20%

  #     - lambda:
  #         name: 4 Color Rotation
  #         update_interval: 1s
  #         lambda: |-
  #           static int state = 0;
  #           auto call = id($devicename).turn_on();
  #           // Transtion of 1000ms = 1s
  #           call.set_transition_length(1000);
  #           if (state == 0) {
  #             call.set_rgb(1.0, 1.0, 1.0);
  #           } else if (state == 1) {
  #             call.set_rgb(1.0, 0.0, 1.0);
  #           } else if (state == 2) {
  #             call.set_rgb(0.0, 0.0, 1.0);
  #           } else {
  #             call.set_rgb(1.0, 0.0, 0.0);
  #           }
  #           call.perform();
  #           state += 1;
  #           if (state == 4)
  #             state = 0;

  #     - strobe:
  #         name: 3 Color Strobe
  #         colors:
  #           - state: True
  #             brightness: 100%
  #             red:  100%
  #             green: 0%
  #             blue: 0%
  #             duration: 500ms
  #           - state: True
  #             brightness: 100%
  #             red: 0%
  #             green: 0%
  #             blue: 100%
  #             duration: 500ms
  #           - state: True
  #             brightness: 100%
  #             red: 0%
  #             green: 100%
  #             blue: 0%
  #             duration: 500ms

  #     - strobe:
  #         name: Lightning
  #         colors:
  #           - state: True
  #             brightness: 100%
  #             red:  90%
  #             green: 90%
  #             blue: 100%
  #             duration: 50ms
  #           - state: False
  #             duration: 50ms 
  #           - state: True
  #             brightness: 100%
  #             red:  90%
  #             green: 90%
  #             blue: 100%
  #             duration: 160ms
  #           - state: False
  #             duration: 50ms              
  #           - state: True
  #             brightness: 100%
  #             red:  90%
  #             green: 90%
  #             blue: 100%
  #             duration: 50ms
  #           - state: False
  #             duration: 3000ms 


  #     - addressable_rainbow:
  #         width: 1
  #     - addressable_rainbow:
  #         name: Double Rainbow
  #         width: 2
  #     - addressable_rainbow:
  #         name: Rainbow Scan
  #         width: 6
  #     - addressable_color_wipe:
  #         add_led_interval: 200ms
  #     - addressable_color_wipe:
  #         name: Full Wipe
  #         add_led_interval: 200ms
  #         colors:
  #           - red: 100%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 4
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 2
  #           - red: 0%
  #             green: 100%
  #             blue: 0%
  #             num_leds: 4
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 2
  #           - red: 0%
  #             green: 0%
  #             blue: 100%
  #             num_leds: 4
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 2
  #     - addressable_color_wipe:
  #         name: RGB Rotate
  #         add_led_interval: 200ms
  #         colors:
  #           - red: 100%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 100%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 100%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #     - addressable_color_wipe:
  #         name: Red Rotate
  #         add_led_interval: 200ms
  #         colors:
  #           - red: 100%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #     - addressable_color_wipe:
  #         name: Green Rotate
  #         add_led_interval: 200ms
  #         colors:
  #           - red: 0%
  #             green: 100%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #     - addressable_color_wipe:
  #         name: Blue Rotate
  #         add_led_interval: 200ms
  #         colors:
  #           - red: 0%
  #             green: 0%
  #             blue: 100%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #           - red: 0%
  #             green: 0%
  #             blue: 0%
  #             num_leds: 1
  #         reverse: False
  #     - addressable_scan:
  #     - addressable_scan:
  #         name: Fast Scan
  #         move_interval: 50ms
  #         scan_width: 1
  #     - addressable_scan:
  #         name: Bounce
  #         move_interval: 300ms
  #         scan_width: 2
  #     - addressable_twinkle:
  #     - addressable_random_twinkle:
  #     - addressable_fireworks:
  #     - addressable_flicker:

