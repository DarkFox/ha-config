substitutions:
  devicename: filament_affugter
  upper_devicename: Filament Affugter
  restore_mode: ALWAYS_ON

packages:
  base: !include packages/base.yaml
  gosund: !include packages/gosund.yaml

switch:
  - platform: template
    name: "${upper_devicename} Cycle Control"
    id: cycle_control
    optimistic: true
    restore_mode: "${restore_mode}"
    turn_on_action:
      - switch.turn_on: relay
    turn_off_action:
      - switch.turn_off: relay

interval:
  - interval: 20min
    id: cycle_interval
    then:
      - if:
          condition:
            switch.is_on: cycle_control
          then:
            - switch.turn_on: relay
            - delay: 10min
            - switch.turn_off: relay
