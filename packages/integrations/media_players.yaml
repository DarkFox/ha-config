homeassistant:
  customize:
    binary_sensor.projector_power:
      hidden: true

media_player:
  # - platform: universal
  #   name: projector
  #   children:
  #     - binary_sensor.projector_power
  #     - media_player.projector_chromecast
  #   commands:
  #     turn_on:
  #       service: switch.turn_on
  #       data:
  #         entity_id: switch.projector_power
  #     turn_off:
  #       service: script.projector_off
  #     volume_up:
  #       service: switch.turn_on
  #       data:
  #         entity_id: switch.projector_vol_up
  #     volume_down:
  #       service: switch.turn_on
  #       data:
  #         entity_id: switch.projector_vol_dn
  #     volume_mute:
  #       service: switch.turn_on
  #       data:
  #         entity_id: switch.projector_mute
  #   attributes:
  #     state: binary_sensor.projector_power

  - platform: webostv
    name: Bedroom TV
    host: 192.168.42.44
    filename: webostv.conf
    turn_on_action:
      service: wake_on_lan.send_magic_packet
      data:
        mac: !secret LGwebOSTV_MAC
        broadcast_address: "192.168.42.255"


binary_sensor:
  - platform: mqtt
    name: projector_power
    state_topic: "projector/available"
    device_class: light


automation:
  # Notify when group becomes unavailable
  - alias: 'Cast Group Unavailable'
    initial_state: true
    trigger:
      platform: state
      entity_id:
        - media_player.all_speakers
        - media_player.minis
        - media_player.east_side_speakers
        - media_player.office_speakers
        - media_player.west_side_speakers
      to: 'unavailable'
      for:
        minutes: 10
    action:
      service: notify.phone
      data_template:
        title: "Home Assistant"
        message: >
          Lost connection to {{ state_attr(trigger.entity_id, "friendly_name") }}
