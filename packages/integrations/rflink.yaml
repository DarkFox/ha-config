rflink:
  port: /dev/ttyACM1

light:
  platform: rflink
  automatic_add: false
  device_defaults:
    fire_event: true
    signal_repetitions: 2

switch:
  platform: rflink
  device_defaults:
    fire_event: true
    signal_repetitions: 2
  devices:
    # Apartment Door Lock
    ev1527_03d3e0_0a:
      name: apartment_lock_open
      fire_event: true
    ev1527_03d3e0_0e:
      name: apartment_lock_close
      fire_event: true

    # Door Switches
    ev1527_03b350_0a:
      name: apartment_door_open
      fire_event: true
    ev1527_03b350_0e:
      name: apartment_door_close
      fire_event: true

    # ev1527_03d4d0_0a:
    #   name: bathroom_window_open
    #   fire_event: true
    # ev1527_03d4d0_0e:
    #   name: bathroom_window_close
    #   fire_event: true

    ev1527_0388a0_0a:
      name: storage_room_door_open
      fire_event: true
    ev1527_0388a0_0e:
      name: storage_room_door_close
      fire_event: true

    # Power Switches - Old
    # tristate_80aaa1_10: # 1
    #   name: Party Light 1
    # !!!DEAD???
    # tristate_80aaa4_10: # 2
    #   name: Party Light 2
    # tristate_80aa90_10: # 3
    #   name: Party Light 3

    # Power Switches - New
    # tristate_82a2a1_10: # 1
    #   name: unused_no_0612
    #   aliases:
    #     - tristate_8a22a1_10
    # tristate_82a2a4_10: # 2
    #   name: unused_no_0615
    #   aliases:
    #     - tristate_8a22a4_10
    # tristate_82a290_10: # 3
    #   name: unused_no_0611
    #   aliases:
    #     - tristate_8a2290_10
    # tristate_82a260_10: # 4
    #   name: unused_no_xxx4
    #   aliases:
    #     - tristate_8a2260_10
    # tristate_8a21a0_10: # 5
    #   name: unused_no_xxx5
    #   aliases:
    #     - tristate_82a1a0_10

binary_sensor:
  - platform: rflink
    devices:
      conrad_f0785c_0a: # -0337
        name: Bedroom Floor Motion
        device_class: motion
        off_delay: 10

      conrad_c2785c_0a:
        name: Storage Room Motion
        device_class: motion
        off_delay: 10

      conrad_9eb85c_0a:
        name: Office PC Motion
        device_class: motion
        off_delay: 10

      conrad_85b85c_0a: # -0314
        name: Bed Motion
        device_class: motion
        off_delay: 10

  - platform: template
    sensors:
      apartment_lock:
        friendly_name: Apartment Door Lock
        entity_id: input_boolean.apartment_lock
        value_template: "{{ is_state('input_boolean.apartment_lock', 'on') }}"
        device_class: lock

      apartment_door:
        friendly_name: Apartment Door
        entity_id: input_boolean.apartment_door
        value_template: "{{ is_state('input_boolean.apartment_door', 'on') }}"
        device_class: opening

      storage_room_door:
        friendly_name: Storage Room Door
        entity_id: input_boolean.storage_room_door
        value_template: "{{ is_state('input_boolean.storage_room_door', 'on') }}"
        device_class: opening

automation:

  - alias: apartment_lock_open
    initial_state: true
    trigger:
      platform: event
      event_type: button_pressed
      event_data:
        entity_id: switch.apartment_lock_open
    action:
      service: input_boolean.turn_on
      data:
        entity_id: input_boolean.apartment_lock

  - alias: apartment_lock_close
    initial_state: true
    trigger:
      platform: event
      event_type: button_pressed
      event_data:
        entity_id: switch.apartment_lock_close
    action:
      service: input_boolean.turn_off
      data:
        entity_id: input_boolean.apartment_lock

  - alias: apartment_door_open
    initial_state: true
    trigger:
      platform: event
      event_type: button_pressed
      event_data:
        entity_id: switch.apartment_door_open
    action:
      service: input_boolean.turn_on
      data:
        entity_id: input_boolean.apartment_door

  - alias: apartment_door_close
    initial_state: true
    trigger:
      platform: event
      event_type: button_pressed
      event_data:
        entity_id: switch.apartment_door_close
    action:
      service: input_boolean.turn_off
      data:
        entity_id: input_boolean.apartment_door

  - alias: storage_room_door_open
    initial_state: true
    trigger:
      platform: event
      event_type: button_pressed
      event_data:
        entity_id: switch.storage_room_door_open
    action:
      service: input_boolean.turn_on
      data:
        entity_id: input_boolean.storage_room_door

  - alias: storage_room_door_close
    initial_state: true
    trigger:
      platform: event
      event_type: button_pressed
      event_data:
        entity_id: switch.storage_room_door_close
    action:
      service: input_boolean.turn_off
      data:
        entity_id: input_boolean.storage_room_door

input_boolean:
  apartment_lock:
  apartment_door:
  storage_room_door:
