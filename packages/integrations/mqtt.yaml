mqtt:
  broker: 192.168.33.2
  discovery: true
  username: homeassistant
  password: !secret mosquitto_password

homeassistant:
  customize:
    sensor.energy_meter_kwh:
      friendly_name: "Energy Meter (kWh)"
      icon: mdi:flash
    sensor.energy_meter_watt:
      friendly_name: "Energy Meter (Watt)"
      icon: mdi:speedometer
    sensor.energy_meter_watt_mean:
      friendly_name: "Energy Meter (Watt) Stats"
      icon: mdi:speedometer
    sensor.party_button_battery:
      friendly_name: Party Button Battery
      icon: mdi:battery
    switch.party_button:
      friendly_name: Party Button
      icon: mdi:nuke

group:
  energy_meter:
    name: 'Energy Meter'
    entities:
      - sensor.energy_meter_kwh
      - sensor.energy_meter_watt
      - sensor.energy_meter_watt_mean
      - sensor.energy_meter_watt_change

  display_cabinet:
    name: 'Display Cabinet'
    entities:
      - light.display_cabinet_front
      - light.display_cabinet_top
      - light.display_cabinet_bottom

sensor:
  - platform: mqtt
    name: energy_meter_kwh
    state_topic: "meter/1/reading"
    unit_of_measurement: "kWh"
    value_template: '{{ value_json.kwhr }}'
  - platform: mqtt
    name: energy_meter_watt
    state_topic: "meter/1/reading"
    unit_of_measurement: "W"
    value_template: '{{ value_json.power | int }}'
  - platform: statistics
    name: energy_meter_watt
    entity_id: sensor.energy_meter_watt
  - platform: template
    sensors:
      energy_meter_watt_change:
        friendly_name: 'Energy Watt Change'
        unit_of_measurement: "W"
        entity_id: sensor.energy_meter_watt_mean
        value_template: '{{ states.sensor.energy_meter_watt_mean.attributes.change | float }}'

  - platform: mqtt
    name: sleep_tracker
    state_topic: 'sleeptracker/tracking/state'
  - platform: mqtt
    name: phone_alarm
    state_topic: 'sleeptracker/alarm/state'

  - platform: mqtt
    name: party_button_battery
    state_topic: '00C16B3E/partybutton/battery'
    availability_topic: "00C16B3E/partybutton/available"
    unit_of_measurement: "v"
    value_template: '{{ value | float / 1000 }}'

switch:
  - platform: mqtt
    name: party_button
    state_topic: "00C16B3E/partybutton/status"
    command_topic: "00C16B3E/partybutton/switch"
    availability_topic: "00C16B3E/partybutton/available"

light:
  - platform: mqtt
    name: "TV Shelf"
    state_topic: "001AB084/rgb/light/status"
    command_topic: "001AB084/rgb/light/switch"
    brightness_state_topic: "001AB084/rgb/brightness/status"
    brightness_command_topic: "001AB084/rgb/brightness/set"
    rgb_state_topic: "001AB084/rgb/rgb/status"
    rgb_command_topic: "001AB084/rgb/rgb/set"
    effect_state_topic: "001AB084/rgb/effect/status"
    effect_command_topic: "001AB084/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash

  - platform: mqtt
    name: "Bar Desk"
    state_topic: "0023743D/rgb/light/status"
    command_topic: "0023743D/rgb/light/switch"
    brightness_state_topic: "0023743D/rgb/brightness/status"
    brightness_command_topic: "0023743D/rgb/brightness/set"
    rgb_state_topic: "0023743D/rgb/rgb/status"
    rgb_command_topic: "0023743D/rgb/rgb/set"
    effect_state_topic: "0023743D/rgb/effect/status"
    effect_command_topic: "0023743D/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash

  - platform: mqtt
    name: "Cabinet Spots"
    state_topic: "0023743D/w1/light/status"
    command_topic: "0023743D/w1/light/switch"
    brightness_state_topic: "0023743D/w1/brightness/status"
    brightness_command_topic: "0023743D/w1/brightness/set"

  - platform: mqtt
    name: "Cabinet Shelves"
    state_topic: "0023743D/w2/light/status"
    command_topic: "0023743D/w2/light/switch"
    brightness_state_topic: "0023743D/w2/brightness/status"
    brightness_command_topic: "0023743D/w2/brightness/set"

  - platform: mqtt
    name: "Windowsill"
    state_topic: "00236FEE/rgb/light/status"
    command_topic: "00236FEE/rgb/light/switch"
    brightness_state_topic: "00236FEE/rgb/brightness/status"
    brightness_command_topic: "00236FEE/rgb/brightness/set"
    rgb_state_topic: "00236FEE/rgb/rgb/status"
    rgb_command_topic: "00236FEE/rgb/rgb/set"
    effect_state_topic: "00236FEE/rgb/effect/status"
    effect_command_topic: "00236FEE/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash


  - platform: mqtt
    name: "TV Backlight"
    state_topic: "002358ED/rgb/light/status"
    command_topic: "002358ED/rgb/light/switch"
    brightness_state_topic: "002358ED/rgb/brightness/status"
    brightness_command_topic: "002358ED/rgb/brightness/set"
    rgb_state_topic: "002358ED/rgb/rgb/status"
    rgb_command_topic: "002358ED/rgb/rgb/set"
    effect_state_topic: "002358ED/rgb/effect/status"
    effect_command_topic: "002358ED/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash


  - platform: mqtt
    name: "Office Desk Shelf"
    state_topic: "0023750F/rgb/light/status"
    command_topic: "0023750F/rgb/light/switch"
    brightness_state_topic: "0023750F/rgb/brightness/status"
    brightness_command_topic: "0023750F/rgb/brightness/set"
    rgb_state_topic: "0023750F/rgb/rgb/status"
    rgb_command_topic: "0023750F/rgb/rgb/set"
    effect_state_topic: "0023750F/rgb/effect/status"
    effect_command_topic: "0023750F/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash


  - platform: mqtt
    name: "Office Desk"
    state_topic: "0023750F/w1/light/status"
    command_topic: "0023750F/w1/light/switch"
    brightness_state_topic: "0023750F/w1/brightness/status"
    brightness_command_topic: "0023750F/w1/brightness/set"

  - platform: mqtt
    name: "Bedroom Shelves"
    state_topic: "00227723/rgb/light/status"
    command_topic: "00227723/rgb/light/switch"
    brightness_state_topic: "00227723/rgb/brightness/status"
    brightness_command_topic: "00227723/rgb/brightness/set"
    rgb_state_topic: "00227723/rgb/rgb/status"
    rgb_command_topic: "00227723/rgb/rgb/set"
    effect_state_topic: "00227723/rgb/effect/status"
    effect_command_topic: "00227723/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash


  - platform: mqtt
    name: "Bedroom Shelf Strip"
    state_topic: "00227723/w1/light/status"
    command_topic: "00227723/w1/light/switch"
    brightness_state_topic: "00227723/w1/brightness/status"
    brightness_command_topic: "00227723/w1/brightness/set"

  - platform: mqtt
    name: "Office Shelves"
    state_topic: "00192899/w1/light/status"
    command_topic: "00192899/w1/light/switch"
    brightness_state_topic: "00192899/w1/brightness/status"
    brightness_command_topic: "00192899/w1/brightness/set"

  - platform: mqtt
    name: "Display Cabinet Front"
    state_topic: "001AAD0C/w1/light/status"
    command_topic: "001AAD0C/w1/light/switch"
    brightness_state_topic: "001AAD0C/w1/brightness/status"
    brightness_command_topic: "001AAD0C/w1/brightness/set"

  - platform: mqtt
    name: "Display Cabinet Top"
    state_topic: "001AAD0C/rgb/light/status"
    command_topic: "001AAD0C/rgb/light/switch"
    brightness_state_topic: "001AAD0C/rgb/brightness/status"
    brightness_command_topic: "001AAD0C/rgb/brightness/set"
    rgb_state_topic: "001AAD0C/rgb/rgb/status"
    rgb_command_topic: "001AAD0C/rgb/rgb/set"
    effect_state_topic: "001AAD0C/rgb/effect/status"
    effect_command_topic: "001AAD0C/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash

  - platform: mqtt
    name: "Display Cabinet Bottom"
    state_topic: "00B94918/rgb/light/status"
    command_topic: "00B94918/rgb/light/switch"
    brightness_state_topic: "00B94918/rgb/brightness/status"
    brightness_command_topic: "00B94918/rgb/brightness/set"
    rgb_state_topic: "00B94918/rgb/rgb/status"
    rgb_command_topic: "00B94918/rgb/rgb/set"
    effect_state_topic: "00B94918/rgb/effect/status"
    effect_command_topic: "00B94918/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash

  - platform: mqtt
    name: "Sofa Corner"
    state_topic: "001AABB8/rgb/light/status"
    command_topic: "001AABB8/rgb/light/switch"
    brightness_state_topic: "001AABB8/rgb/brightness/status"
    brightness_command_topic: "001AABB8/rgb/brightness/set"
    rgb_state_topic: "001AABB8/rgb/rgb/status"
    rgb_command_topic: "001AABB8/rgb/rgb/set"
    effect_state_topic: "001AABB8/rgb/effect/status"
    effect_command_topic: "001AABB8/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash


  - platform: mqtt
    schema: json
    name: Screen Shelf
    retain: true
    state_topic: "bruh/screen-shelf"
    command_topic: "bruh/screen-shelf/set"
    brightness: true
    rgb: true
    effect: true
    effect_list:
      - bpm
      - candy cane
      - confetti
      - cyclon rainbow
      - dots
      - fire
      - glitter
      - juggle
      - lightning
      - police all
      - police one
      - rainbow
      - rainbow with glitter
      - sinelon
      - twinkle
      - noise
      - ripple
      - solid

  - platform: mqtt
    schema: json
    name: Office Shelf Bar
    retain: true
    state_topic: "bruh/office-shelf-bar"
    command_topic: "bruh/office-shelf-bar/set"
    brightness: true
    rgb: true
    effect: true
    effect_list:
      - bpm
      - candy cane
      - confetti
      - cyclon rainbow
      - dots
      - fire
      - glitter
      - juggle
      - lightning
      - police all
      - police one
      - rainbow
      - rainbow with glitter
      - sinelon
      - twinkle
      - noise
      - ripple
      - solid

  - platform: mqtt
    schema: json
    name: Sofa Table
    retain: true
    state_topic: "bruh/WS2811string"
    command_topic: "bruh/WS2811string/set"
    brightness: true
    rgb: true
    effect: true
    effect_list:
      - bpm
      - candy cane
      - confetti
      - cyclon rainbow
      - dots
      - fire
      - glitter
      - juggle
      - lightning
      - police all
      - police one
      - rainbow
      - rainbow with glitter
      - sinelon
      - twinkle
      - noise
      - ripple
      - solid

  - platform: mqtt
    name: "Kitchen Cabinets"
    state_topic: "001AAF03/rgb/light/status"
    command_topic: "001AAF03/rgb/light/switch"
    brightness_state_topic: "001AAF03/rgb/brightness/status"
    brightness_command_topic: "001AAF03/rgb/brightness/set"
    rgb_state_topic: "001AAF03/rgb/rgb/status"
    rgb_command_topic: "001AAF03/rgb/rgb/set"
    effect_state_topic: "001AAF03/rgb/effect/status"
    effect_command_topic: "001AAF03/rgb/effect/set"
    effect_list:
      - rainbow
      - random
      - fade
      - blink
      - rainbow_flash
      - random_flash

  - platform: mqtt
    name: "Hobby Desk"
    state_topic: "00192B4F/w1/light/status"
    command_topic: "00192B4F/w1/light/switch"
    brightness_state_topic: "00192B4F/w1/brightness/status"
    brightness_command_topic: "00192B4F/w1/brightness/set"

  - platform: mqtt
    name: "Kitchen Sink"
    state_topic: "stat/kitchen1/POWER"
    command_topic: "cmnd/kitchen1/POWER"
    qos: 1
    payload_on: "ON"
    payload_off: "OFF"

  - platform: mqtt
    name: "Kitchen Stove"
    state_topic: "stat/kitchen2/POWER"
    command_topic: "cmnd/kitchen2/POWER"
    qos: 1
    payload_on: "ON"
    payload_off: "OFF"

  - brightness: true
    flash: true
    name: Desk Spot 4
    platform: mqtt
    schema: json
    state_topic: deskspots/light/desk_spot_4/state
    command_topic: deskspots/light/desk_spot_4/command
    availability_topic: deskspots/status
  - brightness: true
    flash: true
    name: Desk Spot 1
    platform: mqtt
    schema: json
    state_topic: deskspots/light/desk_spot_1/state
    command_topic: deskspots/light/desk_spot_1/command
    availability_topic: deskspots/status
  - brightness: true
    flash: true
    name: Desk Spot 2
    platform: mqtt
    schema: json
    state_topic: deskspots/light/desk_spot_2/state
    command_topic: deskspots/light/desk_spot_2/command
    availability_topic: deskspots/status
  - brightness: true
    flash: true
    name: Desk Spot 3
    platform: mqtt
    schema: json
    state_topic: deskspots/light/desk_spot_3/state
    command_topic: deskspots/light/desk_spot_3/command
    availability_topic: deskspots/status
  - brightness: true
    flash: true
    name: bed_shelf w1
    platform: mqtt
    schema: json
    state_topic: bed_shelf/light/bed_shelf_w1/state
    command_topic: bed_shelf/light/bed_shelf_w1/command
    availability_topic: bed_shelf/status
  - brightness: true
    flash: true
    name: bed_shelf w2
    platform: mqtt
    schema: json
    state_topic: bed_shelf/light/bed_shelf_w2/state
    command_topic: bed_shelf/light/bed_shelf_w2/command
    availability_topic: bed_shelf/status
  - brightness: true
    rgb: true
    flash: true
    name: bed_shelf rgb
    platform: mqtt
    schema: json
    state_topic: bed_shelf/light/bed_shelf_rgb/state
    command_topic: bed_shelf/light/bed_shelf_rgb/command
    availability_topic: bed_shelf/status
  - brightness: true
    flash: true
    name: bedroom_cupboard w1
    platform: mqtt
    schema: json
    state_topic: bedroom_cupboard/light/bedroom_cupboard_w1/state
    command_topic: bedroom_cupboard/light/bedroom_cupboard_w1/command
    availability_topic: bedroom_cupboard/status
  - brightness: true
    flash: true
    name: bedroom_cupboard w2
    platform: mqtt
    schema: json
    state_topic: bedroom_cupboard/light/bedroom_cupboard_w2/state
    command_topic: bedroom_cupboard/light/bedroom_cupboard_w2/command
    availability_topic: bedroom_cupboard/status
  - brightness: true
    rgb: true
    flash: true
    name: bedroom_cupboard rgb
    platform: mqtt
    schema: json
    state_topic: bedroom_cupboard/light/bedroom_cupboard_rgb/state
    command_topic: bedroom_cupboard/light/bedroom_cupboard_rgb/command
    availability_topic: bedroom_cupboard/status