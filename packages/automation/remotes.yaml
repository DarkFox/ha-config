automation:
  # Bedroom Remote #
  - alias: bed_remote_reset
    trigger:
      platform: state
      entity_id: group.bedroom_remote
      to: 'on'
      for:
        seconds: 1 # In reality a bit more than 8 seconds.
    action:
      service: homeassistant.turn_off
      data:
        entity_id: group.bedroom_remote

  - alias: bed_light_full_bright
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_100
      to: 'on'
    action:
      service: light.turn_on
      data:
        entity_id: light.bedroom_shelf_strip
        brightness: 255

  - alias: bed_light_dimmed
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_50
      to: 'on'
    action:
      service: light.turn_on
      data:
        entity_id: light.bedroom_shelf_strip
        brightness: 8

  - alias: bed_light_off
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_25
      to: 'on'
    action:
      service: light.turn_off
      data:
        entity_id: light.bedroom_shelf_strip

  - alias: bedside_light_toggle_on
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_off
      to: 'on'
    condition:
      - condition: state
        entity_id: light.bedside
        state: 'off'
    action:
      service: light.turn_on
      data_template:
        entity_id: light.bedside
        brightness: 255
        color_temp: 368 # Set light to white

  - alias: bedside_light_toggle_off
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_off
      to: 'on'
    condition:
      - condition: state
        entity_id: light.bedside
        state: 'on'
    action:
      service: light.turn_off
      data:
        entity_id: light.bedside

  - alias: bedroom_light_profile_bright
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_light
      to: 'on'
    action:
      service: input_select.select_option
      data_template:
        option: 'Bright'
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: bedroom_light_profile_brighten
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_mode_plus
      to: 'on'
    condition:
      condition: template
      value_template: >
        {% if is_state('input_boolean.guests', 'on') %}
          {{ states.input_select.bedroom_light_profile.state != 'Bright' }}
        {% else %}
          {{ states.input_select.light_profile.state != 'Bright' }}
        {% endif %}
    action:
      service: input_select.select_previous
      data_template:
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: bedroom_light_profile_dim
    trigger:
      platform: state
      entity_id: switch.bedroom_remote_mode_minus
      to: 'on'
    condition:
      condition: template
      value_template: >
        {% if is_state('input_boolean.guests', 'on') %}
          {{ states.input_select.bedroom_light_profile.state != 'Off' }}
        {% else %}
          {{ states.input_select.light_profile.state != 'Off' }}
        {% endif %}
    action:
      service: input_select.select_next
      data_template:
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}


  # Livingroom Remote #
  - alias: livingroom_remote_reset
    trigger:
      platform: state
      entity_id: group.livingroom_remote
      to: 'on'
      for:
        seconds: 1 # In reality a bit more than 8 seconds.
    action:
      service: homeassistant.turn_off
      data:
        entity_id: group.livingroom_remote

  - alias: livingroom_light_profile_off
    trigger:
      platform: state
      entity_id: switch.livingroom_remote_off
      to: 'on'
    action:
      service: input_select.select_option
      data_template:
        entity_id: input_select.light_profile
        option: 'Off'

  - alias: livingroom_light_profile_bright
    trigger:
      platform: state
      entity_id: switch.livingroom_remote_light
      to: 'on'
    action:
      service: input_select.select_option
      data_template:
        entity_id: input_select.light_profile
        option: 'Bright'

  - alias: livingroom_light_profile_brighten
    trigger:
      platform: state
      entity_id: switch.livingroom_remote_mode_plus
      to: 'on'
    action:
      service: input_select.select_previous
      entity_id: input_select.light_profile

  - alias: livingroom_light_profile_dim
    trigger:
      platform: state
      entity_id: switch.livingroom_remote_mode_minus
      to: 'on'
    action:
      service: input_select.select_next
      entity_id: input_select.light_profile

  # Office Hue Dimmer #
  - alias: office_dimmer_on
    trigger:
      - platform: state
        entity_id: sensor.office_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.office_dimmer
          state: '1_click_up'
    action:
      service: input_select.select_option
      data_template:
        option: 'Default'
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.office_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: office_dimmer_up
    trigger:
      - platform: state
        entity_id: sensor.office_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.office_dimmer
          state: '2_click_up'
        - condition: template
          value_template: >
            {% if is_state('input_boolean.guests', 'on') %}
              {{ states.input_select.office_light_profile.state != 'Bright' }}
            {% else %}
              {{ states.input_select.light_profile.state != 'Bright' }}
            {% endif %}
    action:
      service: input_select.select_previous
      data_template:
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.office_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: office_dimmer_down
    trigger:
      - platform: state
        entity_id: sensor.office_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.office_dimmer
          state: '3_click_up'
        - condition: template
          value_template: >
            {% if is_state('input_boolean.guests', 'on') %}
              {{ states.input_select.office_light_profile.state != 'Off' }}
            {% else %}
              {{ states.input_select.light_profile.state != 'Off' }}
            {% endif %}
    action:
      service: input_select.select_next
      data_template:
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.office_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: office_dimmer_off
    trigger:
      - platform: state
        entity_id: sensor.office_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.office_dimmer
          state: '4_click_up'
    action:
      service: input_select.select_option
      data_template:
        option: 'Off'
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.office_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  # Bedroom Hue Dimmer #
  - alias: bedroom_dimmer_on
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '1_click_up'
    action:
      service: input_select.select_option
      data_template:
        option: 'Default'
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: bedroom_dimmer_up
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '2_click_up'
        - condition: template
          value_template: >
            {% if is_state('input_boolean.guests', 'on') %}
              {{ states.input_select.bedroom_light_profile.state != 'Bright' }}
            {% else %}
              {{ states.input_select.light_profile.state != 'Bright' }}
            {% endif %}
    action:
      service: input_select.select_previous
      data_template:
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: bedroom_dimmer_down
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '3_click_up'
        - condition: template
          value_template: >
            {% if is_state('input_boolean.guests', 'on') %}
              {{ states.input_select.bedroom_light_profile.state != 'Off' }}
            {% else %}
              {{ states.input_select.light_profile.state != 'Off' }}
            {% endif %}
    action:
      service: input_select.select_next
      data_template:
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: bedroom_dimmer_off
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '4_click_up'
    action:
      service: input_select.select_option
      data_template:
        option: 'Off'
        entity_id: >
          {% if is_state('input_boolean.guests', 'on') %}
            input_select.bedroom_light_profile
          {% else %}
            input_select.light_profile
          {% endif %}

  - alias: bedroom_dimmer_bedside_bright
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '1_hold_up'
    action:
      service: light.turn_on
      data:
        brightness: 255
        color_temp: 350
        entity_id:
          - light.bedside

  - alias: bedroom_dimmer_bedside_dimmed
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '2_hold_up'
    action:
      service: light.turn_on
      data:
        brightness: 32
        color_temp: 500
        entity_id:
          - light.bedside

  - alias: bedroom_dimmer_bedside_night
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '3_hold_up'
    action:
      service: light.turn_on
      data:
        brightness: 1
        rgb_color: [255,0,0]
        entity_id:
          - light.bedside

  - alias: bedroom_dimmer_bedside_off
    trigger:
      - platform: state
        entity_id: sensor.bedroom_dimmer_last_updated
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sensor.bedroom_dimmer
          state: '4_hold_up'
    action:
      service: light.turn_off
      data:
        entity_id:
          - light.bedside
