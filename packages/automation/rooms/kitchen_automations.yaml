# template:
#   - binary_sensor:
#       - name: "Ovn tændt"
#         icon: mdi:stove
#         state: "{{ is_state('switch.gosund_8', 'unavailable') }}"

automation:
  - alias: set kitchen mini dnd
    id: set_kitchen_mini_dnd
    mode: queued
    initial_state: true
    trigger:
      - platform: state
        entity_id: input_select.kitchen_room_state
    action:
      - service: "switch.turn_{{ 'off' if trigger.to_state.state == 'active' else 'on' }}"
        target:
          entity_id: switch.kokken_mini_do_not_disturb
#   - id: oven_on_without_timer
#     alias: Remind me regularly that the oven is on, when I haven't set a timer
#     trigger:
#       - platform: state
#         entity_id: binary_sensor.ovn_taendt
#         to: "on"
#         for:
#           minutes: 1
#       - platform: state
#         entity_id: binary_sensor.ovn_taendt
#         to: "on"
#         for:
#           minutes: 15
#       - platform: state
#         entity_id: binary_sensor.ovn_taendt
#         to: "on"
#         for:
#           minutes: 30
#       - platform: state
#         entity_id: binary_sensor.ovn_taendt
#         to: "on"
#         for:
#           minutes: 45
#       - platform: state
#         entity_id: binary_sensor.ovn_taendt
#         to: "on"
#         for:
#           minutes: 60
#     condition:
#       - condition: state
#         entity_id: binary_sensor.kitchen_timer_1_active
#         state: "off"
#     action:
#       - service: script.notify_everywhere
#         data:
#           message: "Ovnen har været tændt i {{ trigger.for }}, uden en timer."
