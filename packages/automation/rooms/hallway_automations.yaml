automation:
  - alias: set hallway mini dnd
    id: set_hallway_mini_dnd
    mode: queued
    initial_state: true
    trigger:
      - platform: state
        entity_id: input_select.hallway_room_state
    action:
      - service: "switch.turn_{{ 'off' if trigger.to_state.state == 'active' else 'on' }}"
        target:
          entity_id: switch.gang_mini_do_not_disturb

  - id: doorbell_notification
    alias: Doorbell Notification
    mode: single
    trigger:
      - platform: state
        entity_id: binary_sensor.dorklokke_knap
        from: "off"
        to: "on"
    action:
      - service: notify.telegram_darkfox
        data:
          message: "Ding dong!"
      - service: script.popup_notification
        data:
          message: "Ding dong!"
      - condition: state
        entity_id: switch.dorklokke_forstyr_ikke
        state: "off"
      - service: script.voice_broadcast
        data:
          message: "Ding dong!"
