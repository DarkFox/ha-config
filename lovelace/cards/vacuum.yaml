type: vertical-stack
cards:
  - type: horizontal-stack
    cards:
      - type: custom:button-card
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        entity: vacuum.roborock_s5
        show_state: true
        show_name: false
        show_icon: true
        icon_height: 50px
        state:
          - value: "cleaning"
            styles:
              icon:
                - color: var(--paper-item-icon-active-color)
          - value: "docked"
            styles:
              icon:
                - color: var(--light-primary-color)
          - value: "returning"
            styles:
              icon:
                - color: var(--secondary-color)
          - value: "paused"
            styles:
              icon:
                - color: var(--secondary-color)
          - value: "idle"
            styles:
              icon:
                - color: var(--secondary-color)
          - value: "error"
            styles:
              icon:
                - color: var(--error-color)
      - type: custom:button-card
        tap_action:
          action: toggle
        entity: script.send_vacuum_to_emptying_position
        name: Tømmeposition
        icon: mdi:trash-can
        icon_height: 50px
      - type: custom:button-card
        tap_action:
          action: toggle
        entity: input_boolean.vacuum_show_card
        hold_action:
          action: none
        icon: mdi:menu
        icon_height: 50px

  - type: conditional
    conditions:
      - entity: input_boolean.vacuum_show_card
        state: "on"
    card:
      type: custom:xiaomi-vacuum-map-card
      entity: vacuum.roborock_s5
      map_source:
        camera: camera.xiaomi_cloud_map_extractor
      calibration_source:
        camera: true
      map_modes:
        - template: vacuum_clean_segment
          vacuum_platform: default
          map_locked: true
          predefined_selections:
            - id: 16
              label:
                text: Værksted
                x: 23100
                "y": 28800
                offset_y: 30
              icon:
                x: 23100
                "y": 28800
                name: mdi:hand-saw
              outline:
                # x0: 21600
                # y0: 27500
                # x1: 24850
                # y1: 29600
                - - 21600 # x0
                  - 27500 # y0
                - - 24850 # x1
                  - 27500 # y0
                - - 24850 # x1
                  - 29600 # y1
                - - 21600 # x0
                  - 29600 # y1
            - id: 17
              label:
                text: Kontor
                x: 23100
                "y": 26450
                offset_y: 30
              icon:
                x: 23100
                "y": 26450
                name: mdi:desktop-tower-monitor
              outline:
                # x0: 21400
                # y0: 25200
                # x1: 24850
                # y1: 27450
                - - 21400 # x0
                  - 25200 # y0
                - - 24850 # x1
                  - 25200 # y0
                - - 24850 # x1
                  - 27450 # y1
                - - 21400 # x0
                  - 27450 # y1
            - id: 18
              label:
                text: Soveværelse
                x: 23100
                "y": 31300
                offset_y: 30
              icon:
                x: 23100
                "y": 31300
                name: mdi:bed
              outline:
                # x0: 21450
                # y0: 29850
                # x1: 24850
                # y1: 32550
                - - 21450 # x0
                  - 29850 # y0
                - - 24850 # x1
                  - 29850 # y0
                - - 24850 # x1
                  - 32550 # y1
                - - 21450 # x0
                  - 32550 # y1
            - id: 19
              label:
                text: Gang
                x: 25550
                "y": 30000
                offset_y: 30
              icon:
                x: 25550
                "y": 30000
                name: mdi:door
              outline:
                # x0: 24900
                # y0: 27500
                # x1: 29500
                # y1: 31400
                - - 24950 # x0
                  - 27500 # y0
                - - 26180
                  - 27500
                - - 26180
                  - 29800
                - - 29550 # x1
                  - 29800 # y0
                - - 29550 # x1
                  - 31400 # y1
                - - 24950 # x0
                  - 31400 # y1
            - id: 21
              label:
                text: Køkken
                x: 26550
                "y": 26450
                offset_y: 30
              icon:
                x: 26550
                "y": 26450
                name: mdi:food-fork-drink
              outline:
                # x0: 24950
                # y0: 25200
                # x1: 28450
                # y1: 27450
                - - 24950 # x0
                  - 25200 # y0
                - - 28450 # x1
                  - 25200 # y0
                - - 28450 # x1
                  - 27450 # y1
                - - 24950 # x0
                  - 27450 # y1
            - id: 22
              label:
                text: Stue
                x: 32000
                "y": 27700
                offset_y: 30
              icon:
                x: 32000
                "y": 27700
                name: mdi:sofa
              outline:
                # x0: 28450
                # y0: 25200
                # x1: 35300
                # y1: 29800
                - - 28450 # x0
                  - 25200 # y0
                - - 35300 # x1
                  - 25200 # y0
                - - 35300 # x1
                  - 29800 # y1
                - - 28450 # x0
                  - 29800 # y1
        - template: vacuum_clean_zone
        - template: vacuum_goto
        - template: vacuum_goto_predefined
          predefined_selections:
            - position:
                - 27550
                - 26450
              label:
                text: Emptying
                x: 27550
                "y": 26450
                offset_y: 30
              icon:
                name: mdi:broom
                x: 27550
                "y": 26450
        - template: vacuum_follow_path
