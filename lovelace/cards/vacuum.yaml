type: vertical-stack
cards:
  - type: horizontal-stack
    cards:
      - type: custom:button-card
        tap_action:
          action: toggle
        hold_action:
          action: more-info
        entity: vacuum.roborock_s5
        show_state: true
        show_name: false
        show_icon: true
        icon_height: 50px
        state:
          - value: "cleaning"
            styles:
              icon:
                - color: var(--paper-item-icon-active-color)
          - value: "docked"
            styles:
              icon:
                - color: var(--light-primary-color)
          - value: "returning"
            styles:
              icon:
                - color: var(--secondary-color)
          - value: "paused"
            styles:
              icon:
                - color: var(--secondary-color)
          - value: "idle"
            styles:
              icon:
                - color: var(--secondary-color)
          - value: "error"
            styles:
              icon:
                - color: var(--error-color)
      - type: custom:button-card
        tap_action:
          action: toggle
        entity: script.send_vacuum_to_emptying_position
        name: Tømmeposition
        icon: mdi:trash-can
        icon_height: 50px
      - type: custom:button-card
        tap_action:
          action: toggle
        entity: input_boolean.vacuum_show_card
        hold_action:
          action: none
        icon: mdi:menu
        icon_height: 50px

  - type: conditional
    conditions:
      - entity: input_boolean.vacuum_show_card
        state: "on"
    card:
      type: custom:xiaomi-vacuum-map-card
      entity: vacuum.roborock_s5
      map_source:
        camera: camera.xiaomi_cloud_map_extractor
      calibration_source:
        camera: true
      map_modes:
        - template: vacuum_clean_segment
          predefined_selections:
            - id: 17
              label:
                text: Køkken
                x: 27150
                "y": 21000
                offset_y: 35
              icon:
                x: 27150
                "y": 21000
                name: mdi:food-fork-drink
              outline:
                - - 26150
                  - 18300
                - - 28300
                  - 18300
                - - 28300
                  - 22250
                - - 26150
                  - 22250
            - id: 18
              label:
                text: Kontor
                x: 26000
                "y": 27350
                offset_y: 35
              icon:
                x: 26000
                "y": 27350
                name: mdi:desktop-tower-monitor
              outline:
                - - 23700
                  - 25100
                - - 28350
                  - 25100
                - - 28350
                  - 28150
                - - 23700
                  - 28150
            - id: 21
              label:
                text: Gang
                x: 29100
                "y": 22500
                offset_y: 35
              icon:
                x: 29100
                "y": 22500
                name: mdi:door
              outline:
                - - 28550
                  - 20850
                - - 29650
                  - 20850
                - - 29650
                  - 23500
                - - 28550
                  - 23500
            - id: 23
              label:
                text: Stue
                x: 30100
                "y": 26600
                offset_y: 35
              icon:
                x: 30100
                "y": 26600
                name: mdi:sofa
              outline:
                - - 28550
                  - 23600
                - - 32350
                  - 23600
                - - 32350
                  - 28150
                - - 28550
                  - 28150
            - id: 24
              label:
                text: Soveværelse
                x: 30800
                "y": 21600
                offset_y: 35
              icon:
                x: 30800
                "y": 21600
                name: mdi:bed
              outline:
                - - 29800
                  - 18300
                - - 32350
                  - 18300
                - - 32350
                  - 22400
                - - 29800
                  - 22400
        - template: vacuum_clean_zone
        - template: vacuum_goto
        - template: vacuum_goto_predefined
          predefined_selections:
            - position:
                - 27500
                - 19500
              label:
                text: Emptying
                x: 27500
                "y": 19500
                offset_y: 35
              icon:
                name: mdi:broom
                x: 27500
                "y": 19500
        - template: vacuum_follow_path
      vacuum_platform: default
      map_locked: true
