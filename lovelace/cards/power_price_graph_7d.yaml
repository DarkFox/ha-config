type: "custom:apexcharts-card"
graph_span: 7d
span:
  start: hour
header:
  title: Elpris
  show: true
  show_states: false
  colorize_states: true
hours_12: false
stacked: false
experimental:
  color_threshold: true
all_series_config:
  show:
    legend_value: false
    datalabels: false
    in_brush: true
  float_precision: 3
  invert: false
  fill_raw: last
now:
  show: true
  label: Now
  color: red
series:
  - entity: sensor.el_priser
    name: El Priser
    type: area
    show:
      extremas: true
    opacity: 0.7
    color_threshold:
      - value: 0
        color: "#006000"
      - value: 3
        color: "#008000"
      - value: 4
        color: "#DAA520"
      - value: 5.5
        color: "#FF0000"
    extend_to: false
    data_generator: |
      var a = entity.attributes.prices.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.prices[index]["value"]];
      });
      var b = [a[a.length - 1][0] + 3600000, a[a.length - 1][1]];
      a.push( b );
      return a;
  - entity: sensor.carnot_spotpris_dk2
    name: Spotpriser
    type: line
    opacity: 1
    stroke_width: 2
    color_threshold:
      - value: 0
        color: "#006000"
      - value: 1
        color: "#008000"
      - value: 2
        color: "#DAA520"
      - value: 3
        color: "#FF0000"
    extend_to: false
    data_generator: |
      var a = entity.attributes.predictions.map((start, index) => {
        return [new Date(entity.attributes.predictions[index]["dktime"]).getTime(), (entity.attributes.predictions[index]["prediction"]/1000).toFixed(3)];
      });
      console.log(a);
      var b = [a[a.length - 1][0] + 3600000, a[a.length - 1][1]];
      a.push( b );
      return a;

apex_config:
  chart:
    height: 400px
    zoom:
      enabled: true
      type: x
      zoomedArea:
        fill:
          color: "#90CAF9"
          opacity: 0.4
        stroke:
          color: "#0D47A1"
          opacity: 0.4
          width: 1
  legend:
    show: false
    floating: true
    offsetY: 25
  yaxis:
    min: 0
    max: 10
    opposite: false
    reversed: false
    logarithmic: false
    decimalsInFloat: 2
    labels:
      show: true
    tooltip:
      enabled: true
    crosshairs:
      show: true
  xaxis:
    labels:
      show: true
      rotate: -45
      rotateAlways: true
    logarithmic: false
  stroke:
    show: true
    curve: stepline
    lineCap: butt
    colors:
      - undefined
      - undefined
  plotOptions:
    candlestick:
      colors:
        upward: "#00B746"
        downward: "#EF403C"
      wick:
        useFillColor: true
  markers:
    size: 1
  grid:
    show: true
    strokeDashArray: 1
    position: front
    xaxis:
      lines:
        show: true
