type: "custom:apexcharts-card"
graph_span: 48h
span:
  start: day
  offset: +0H
header:
  title: Elpris
  show: true
  show_states: false
  colorize_states: true
hours_12: false
stacked: false
experimental:
  color_threshold: true
all_series_config:
  show:
    legend_value: false
    datalabels: false
    extremas: true
    in_brush: true
  float_precision: 3
  type: area
  invert: false
  fill_raw: last
  color_threshold:
    - value: -1
      color: "#1E90FF"
    - value: 2.5
      color: "#008000"
    - value: 3.5
      color: "#DAA520"
    - value: 4.5
      color: "#FF0000"
now:
  show: true
  label: Now
  color: red
series:
  - entity: sensor.nordpool_kwh_dk2_dkk
    name: I dag
    opacity: 0.7
    extend_to_end: false
    data_generator: |
      var a = entity.attributes.raw_today.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.raw_today[index]["value"]];
      });
      var b = [a[a.length - 1][0] + 3600000, entity.attributes.raw_tomorrow[0]["value"]];
      a.push( b );
      return a;

  - entity: sensor.nordpool_kwh_dk2_dkk
    name: I morgen
    opacity: 0.7
    data_generator: |
      return entity.attributes.raw_tomorrow.map((start, index) => {
        return [new Date(start["start"]).getTime(), entity.attributes.raw_tomorrow[index]["value"]];
      });

apex_config:
  chart:
    height: 400px
    zoom:
      enabled: true
      type: x
      zoomedArea:
        fill:
          color: "#90CAF9"
          opacity: 0.4
        stroke:
          color: "#0D47A1"
          opacity: 0.4
          width: 1
  legend:
    show: false
    floating: true
    offsetY: 25
  yaxis:
    min: 0
    max: 10
    opposite: false
    reversed: false
    logarithmic: false
    decimalsInFloat: 2
    labels:
      show: true
    tooltip:
      enabled: true
    crosshairs:
      show: true
  xaxis:
    labels:
      show: true
      rotate: -45
      rotateAlways: true
    logarithmic: true
  stroke:
    show: true
    curve: stepline
    lineCap: butt
    colors: undefined
  plotOptions:
    candlestick:
      colors:
        upward: "#00B746"
        downward: "#EF403C"
      wick:
        useFillColor: true
  markers:
    size: 1
  grid:
    show: true
    strokeDashArray: 1
    position: front
    xaxis:
      lines:
        show: true
