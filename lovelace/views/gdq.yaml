title: GDQ
path: gdq
icon: mdi:gamepad-right
type: custom:grid-layout
layout:
  grid-template-columns: 40% 40% 20%
  grid-template-rows: auto
  grid-template-areas: |
    "header header header"
    "left middle right"
  mediaquery:
    "(max-width: 800px)":
      grid-template-columns: 100%
      grid-template-areas: |
        "header"
        "left"
        "middle"
        "right"
    "(max-width: 1200px)":
      grid-template-columns: 50% 50%
      grid-template-areas: |
        "header header"
        "left middle"
        "right right"
cards:
  - type: vertical-stack
    view_layout:
      grid-area: left
    cards:
      - type: vertical-stack
        cards:
          - !include ../cards/gdq/on_deck.yaml

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: All runs

          - type: custom:config-template-card
            entities:
              - sensor.gdq_runs_regex
              - calendar.sgdq_2024
            config_templates: default
            variables:
              RUNS_REGEX: states["sensor.gdq_runs_regex"].attributes.regex
            card:
              type: custom:atomic-calendar-revive
              eventDateFormat: ddd
              showProgressBar: true
              hideDeclined: true
              hideFinishedEvents: true
              showLocation: false
              showDescription: true
              showEventIcon: true
              disableEventLink: true
              maxDaysToShow: 7
              entities:
                - name: Runs to watch
                  entity: calendar.sgdq_2024
                  allowlist: ${RUNS_REGEX}
                  icon: mdi:gamepad-right
                  color: var(--success-color)
                - name: Other runs
                  entity: calendar.sgdq_2024
                  blocklist: ${RUNS_REGEX}
                  icon: mdi:gamepad-right
              card_mod:
                style:
                  .: |
                    ha-card {
                      max-height: calc(85vh - 220px);
                      overflow-y: scroll;
                    }
                    .single-event-container {
                      grid-template-columns: 0.5fr 100fr !important;
                      padding-top: 5px;
                      padding-bottom: 5px;
                      border-bottom: 1px dotted #aaa;
                    }
                    .event-left {
                      width: min-content !important;
                    }
                    .event-title {
                      font-weight: bold;
                      font-size: 1.2em;
                    }

  - type: vertical-stack
    view_layout:
      grid-area: middle
    cards:
      - type: vertical-stack
        cards:
          - !include ../cards/gdq/next_to_watch.yaml

      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: Upcoming runs to watch

          - type: custom:config-template-card
            entities:
              - sensor.gdq_runs_regex
              - calendar.sgdq_2024
            config_templates: default
            variables:
              RUNS_REGEX: states["sensor.gdq_runs_regex"].attributes.regex
            card:
              type: custom:atomic-calendar-revive
              eventDateFormat: ddd
              showProgressBar: true
              hideDeclined: true
              hideFinishedEvents: true
              showLocation: false
              showDescription: true
              showEventIcon: true
              disableEventLink: true
              maxDaysToShow: 7
              entities:
                - entity: calendar.sgdq_2024
                  allowlist: ${RUNS_REGEX}
                  icon: mdi:gamepad-right
                  color: var(--success-color)
              card_mod:
                style:
                  .: |
                    ha-card {
                      max-height: calc(85vh - 220px);
                      overflow-y: scroll;
                    }
                    .single-event-container {
                      grid-template-columns: 0.5fr 100fr !important;
                      padding-top: 5px;
                      padding-bottom: 5px;
                      border-bottom: 1px dotted #aaa;
                    }
                    .event-left {
                      width: min-content !important;
                    }
                    .event-title {
                      font-weight: bold;
                      font-size: 1.2em;
                    }

  - type: vertical-stack
    view_layout:
      grid-area: right
    cards:
      - type: todo-list
        title: Watchlist
        entity: todo.gdq_runs
