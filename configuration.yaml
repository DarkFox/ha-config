homeassistant:
  name: Home
  latitude: !secret home_latitude
  longitude: !secret home_longitude
  elevation: 31
  unit_system: metric
  currency: DKK
  time_zone: Europe/Copenhagen
  packages: !include_dir_named packages

  internal_url: !secret base_url
  external_url: !secret base_url

  auth_providers:
    - type: homeassistant
    - type: trusted_networks
      allow_bypass_login: true
      trusted_networks:
        - 192.168.42.0/24
      trusted_users:
        # Chromecast
        192.168.42.80: 8c5410dab8e54ea2897e1f73531b2f09
        192.168.42.81: 8c5410dab8e54ea2897e1f73531b2f09
        192.168.42.82: 8c5410dab8e54ea2897e1f73531b2f09
        192.168.42.83: 8c5410dab8e54ea2897e1f73531b2f09
        # Kitchen Tablet
        192.168.42.232: 165965cdafd64b1bbd3c56d9347f9f5c
        # Hallway Tablet
        192.168.42.200: 72ae5b2a23844d1abefd65ed5e755755
        # Bedroom Tablet
        192.168.42.22: 1cda5bdef3954c8aba4ee00b69a30eef
        # Office Tablet
        192.168.42.20: 8cc69da389ba463a92380b1083cea4e4
        # Stue Shield
        192.168.42.85: 247ea999723047e9b3e4fd49a26d7bd9
        # 3D Printer
        # octopi.local: 11e32f3e92cc4c268ff57e1dd07b3f6b
        # Quest 2
        192.168.32.52: 8af481f743714e5f88b67def09ae3eb4
        # The rest:
        192.168.42.0/24:
          - ab8fcbf20d6c4c88b19d9fe2981d8a86 # Gæst

  customize: !include customize.yaml

sensor:
  - platform: authenticated

http:
  ip_ban_enabled: true
  login_attempts_threshold: -1
  cors_allowed_origins:
    - !secret base_url
    - !secret local_url
    - https://cast.home-assistant.io
    - https://embed.waze.com
    - https://node.windy.com
  use_x_forwarded_for: true
  trusted_proxies:
    - 127.0.0.1
    - ::1
    # Docker
    - 172.30.33.3
    - 172.30.33.2
    - 172.16.0.0/12
    # Cloudflare
    - 173.245.48.0/20
    - 103.21.244.0/22
    - 103.22.200.0/22
    - 103.31.4.0/22
    - 141.101.64.0/18
    - 108.162.192.0/18
    - 190.93.240.0/20
    - 188.114.96.0/20
    - 197.234.240.0/22
    - 198.41.128.0/17
    - 162.158.0.0/15
    - 104.16.0.0/13
    - 104.24.0.0/14
    - 172.64.0.0/13
    - 131.0.72.0/22
    - 2400:cb00::/32
    - 2606:4700::/32
    - 2803:f800::/32
    - 2405:b500::/32
    - 2405:8100::/32
    - 2a06:98c0::/29
    - 2c0f:f248::/32

config:
my:
cloud:
image:
media_source:
python_script:
media_extractor:
stream:

lovelace:
  mode: yaml

  dashboards:
    lovelace-living-room-remote:
      mode: yaml
      filename: lovelace-living-room-remote.yaml
      title: Stue Fjernbetjening
      icon: mdi:remote
      show_in_sidebar: false
      require_admin: false
    lovelace-living-room-tablet:
      mode: yaml
      filename: lovelace-living-room-tablet.yaml
      title: Stue Tablet
      icon: mdi:tablet
      show_in_sidebar: false
      require_admin: false
    lovelace-bedroom-tablet:
      mode: yaml
      filename: lovelace-bedroom-tablet.yaml
      title: Soveværelse Tablet
      icon: mdi:tablet-android
      show_in_sidebar: false
      require_admin: false
    lovelace-bathroom-tablet:
      mode: yaml
      filename: lovelace-bathroom-tablet.yaml
      title: Badeværelse Tablet
      icon: mdi:tablet-android
      show_in_sidebar: false
      require_admin: false
    lovelace-hallway-tablet:
      mode: yaml
      filename: lovelace-hallway-tablet.yaml
      title: Gang Tablet
      icon: mdi:tablet
      show_in_sidebar: false
      require_admin: false
    lovelace-kitchen-tablet:
      mode: yaml
      filename: lovelace-kitchen-tablet.yaml
      title: Køkken Tablet
      icon: mdi:tablet
      show_in_sidebar: false
      require_admin: false
    lovelace-bathroom-mirror:
      mode: yaml
      filename: lovelace-bathroom-mirror.yaml
      title: Badeværelse Spejl
      icon: mdi:mirror
      show_in_sidebar: false
      require_admin: false
    lovelace-office-tablet:
      mode: yaml
      filename: lovelace-office-tablet.yaml
      title: Kontor Tablet
      icon: mdi:tablet
      show_in_sidebar: false
      require_admin: false

  resources:
    ### HACS ###
    # Libs
    - url: /hacsfiles/lovelace-card-tools/card-tools.js
      type: module
    - url: /browser_mod.js
      type: module

    # Mods
    - url: /hacsfiles/lovelace-layout-card/layout-card.js
      type: module
    - url: /hacsfiles/lovelace-card-mod/card-mod.js
      type: module
    - url: /hacsfiles/decluttering-card/decluttering-card.js
      type: module
    - url: /hacsfiles/config-template-card/config-template-card.js
      type: module
    - url: /hacsfiles/restriction-card/restriction-card.js
      type: module
    - url: /hacsfiles/lovelace-auto-entities/auto-entities.js
      type: module
    - url: /webrtc/webrtc-camera.js
      type: module
    - url: /hacsfiles/lovelace-header-cards/lovelace-header-cards.js
      type: module

    # Packs
    - url: /hacsfiles/lovelace-mushroom/mushroom.js
      type: module

    # Cards
    - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
      type: module
    - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
      type: module
    - url: /hacsfiles/list-card/list-card.js
      type: module
    - url: /hacsfiles/flex-table-card/flex-table-card.js
      type: module
    - url: /hacsfiles/bignumber-card/bignumber-card.js
      type: module
    - url: /hacsfiles/button-card/button-card.js
      type: module
    - url: /hacsfiles/aftership-card/aftership-card.js
      type: module
    - url: /hacsfiles/lovelace-fold-entity-row/fold-entity-row.js
      type: module
    - url: /hacsfiles/lovelace-slider-entity-row/slider-entity-row.js
      type: module
    - url: /hacsfiles/logbook-card/logbook-card.js
      type: module
    - url: /hacsfiles/lovelace-html-card/html-card.js
      type: module
    - url: /hacsfiles/vacuum-card/vacuum-card.js
      type: module
    - url: /hacsfiles/simple-thermostat/simple-thermostat.js
      type: module
    - url: /hacsfiles/lovelace-thermostat-card/main.js
      type: module
    - url: /hacsfiles/lovelace-home-feed-card/lovelace-home-feed-card.js
      type: module
    - url: /hacsfiles/mini-climate-card/mini-climate-card-bundle.js
      type: module
    - url: /hacsfiles/stack-in-card/stack-in-card.js
      type: module
    - url: /hacsfiles/lovelace-state-switch/state-switch.js
      type: module
    - url: /hacsfiles/compass-card/compass-card.js
      type: module
    - url: /hacsfiles/lovelace-xiaomi-vacuum-map-card/xiaomi-vacuum-map-card.js
      type: module
    - url: /hacsfiles/dual-gauge-card/dual-gauge-card.js
      type: module
    - url: /hacsfiles/slider-button-card/slider-button-card.js
      type: module
    - url: /hacsfiles/lovelace-digital-clock/digital-clock.js
      type: module
    - url: /hacsfiles/timer-bar-card/timer-bar-card.js
      type: module
    - url: /hacsfiles/bar-card/bar-card.js
      type: module
    - url: /hacsfiles/weather-card/weather-card.js
      type: module
    - url: /hacsfiles/tesla-style-solar-power-card/tesla-style-solar-power-card.js
      type: module
    - url: /hacsfiles/Home-Assistant-Lovelace-HTML-Jinja2-Template-card/html-template-card.js
      type: module
    - url: /hacsfiles/apexcharts-card/apexcharts-card.js
      type: module
    - url: /hacsfiles/atomic-calendar-revive/atomic-calendar-revive.js
      type: module

    ### MY CARDS ###
    - url: /hacsfiles/rejseplanen-card/rejseplanen-card.js
      type: module
    # - url: /local/custom-lovelace/rejseplanen-card/rejseplanen-card.js?v=3.00
    #   type: module

    - url: /hacsfiles/rejseplanen-stog-card/rejseplanen-stog-card.js
      type: module
    # - url: /local/custom-lovelace/rejseplanen-stog-card/rejseplanen-stog-card.js?v=3.00
    #   type: module

simpleicons:

mobile_app:

map:
discovery:
dhcp:
zeroconf:
conversation:
energy:

recorder:
  db_url: !secret db_url
  purge_keep_days: 90
  exclude:
    event_types:
      - call_service
      - service_removed
      - service_executed
      - platform_discovered
      - homeassistant_start
      - homeassistant_stop
      - feedreader
      - service_registered
      - call_service
      - component_loaded
      - logbook_entry
      - system_log_event
      - automation_triggered
      - script_started
      - timer_out_of_sync
    domains: &recorder_domain_excludes
      - automation
      - script
      - weblink
      - scene
      - zwave
      - geo_location
      - persistent_notification
    entity_globs: &recorder_entity_globs
      - device_tracker.unifi_*
      - sensor.browser_*
      - sensor.*_spaending
      - sensor.*_stromstyrke
      - sensor.*_uptime
      - sensor.*_uptime_2
      - sensor.*_wifi_signal
      - sensor.*_app_hukommelse
      - sensor.secret_*
    entities: &recorder_entity_excludes
      - sensor.last_successful_authentication

      - sensor.uptime
      - sensor.load_1m
      - sensor.load_5m
      - sensor.load_15m

      - binary_sensor.weekday_sensor
      - binary_sensor.workday
      - sensor.time
      - sensor.time_utc
      - sensor.internet_time
      - sensor.date
      - sensor.date_text
      - sensor.date_time
      - sun.sun

      - sensor.s_train_b_next
      - sensor.s_train_message
      - sensor.s_tog_malov
      - sensor.s_tog_norreport_mod_frederikssund
      - sensor.dsb_trafikinfo

      - sensor.podcast_bbc_minute
      - sensor.podcast_daily_tech_news_show
      - sensor.podcast_daily_tech_headlines
      - sensor.podcast_radioavisen

      - binary_sensor.vacation_mode_random_boolean
      - sensor.vacation_mode_random_minutes

      - sensor.dmi_vejr
      - sensor.dmi_warnings_raw
      - sensor.dmi_warnings_specific_raw
      - sensor.dmi_weather_raw
      - sensor.wind_text
      - sensor.wind_speed_name
      - sensor.wind_bearing_name_initials
      - sensor.wind_bearing_name

      - binary_sensor.grocy_expired_products
      - binary_sensor.grocy_expiring_products
      - binary_sensor.grocy_missing_products
      - sensor.grocy_shopping_list
      - sensor.grocy_stock

      - input_number.handwash_timer

      - media_player.mpd
      - sensor.icecast_stream_test
      - sensor.youtube_watch_later

      - sensor.ledfx_presets_config
      - sensor.ledfx_presets

      - sensor.octoprint_last_event

      - sensor.vw_connect_car_captured_timestamp

      - sensor.billigste_time_relative
      - sensor.naeste_billige_time_relative

history:
  exclude:
    domains: *recorder_domain_excludes
    entities: *recorder_entity_excludes
    entity_globs: *recorder_entity_globs

logbook:
  exclude:
    domains: *recorder_domain_excludes
    entities: *recorder_entity_excludes
    entity_globs: *recorder_entity_globs

binary_sensor:
  - platform: workday
    name: Weekday
    country: DK
  - platform: template
    sensors:
      workday:
        value_template: >
          {%- if is_state('calendar.arbejde_ferie', 'on') -%}
            False
          {%- elif is_state('binary_sensor.weekday_sensor', 'off') -%}
            False
          {%- else -%}
            True
          {%- endif -%}

tts:
  - platform: google_cloud
    key_file: googlecloud.json
    voice: da-DK-Wavenet-A
    speed: 0.9
    pitch: -1
  # - platform: google_translate
  #   service_name: google_say
  #   language: 'da'
  # - platform: amazon_polly
  #   aws_access_key_id: !secret aws_client
  #   aws_secret_access_key: !secret aws_secret
  #   region_name: eu-central-1
  #   voice: Naja

downloader:
  download_dir: www/downloads

group: !include groups.yaml
script: !include scripts.yaml

frontend:
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /hacsfiles/lovelace-card-mod/card-mod.js
